{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Events to DataFrame\n",
    "ObsPlus provides a way to extract useful summary information from ObsPy objects in order to create dataframes. This transformation is lossy but very useful when the full complexity of the `Catalog` object isn't warranted. By default the `events_to_df` function collects information the authors of ObsPlus have found useful, but it is fully extensible/customizable using the functionality of the [DataFrameExtractor](../utils/dataframeextractor.ipynb)."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To demonstrate how the `Catalog` can be flattened into a table, let's again use the Crandall catalog."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import obspy\n",
    "import numpy as np\n",
    "from matplotlib import pyplot as plt\n",
    "from obspy.clients.fdsn import Client\n",
    "\n",
    "import obsplus"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>time</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>depth</th>\n",
       "      <th>magnitude</th>\n",
       "      <th>event_description</th>\n",
       "      <th>associated_phase_count</th>\n",
       "      <th>azimuthal_gap</th>\n",
       "      <th>event_id</th>\n",
       "      <th>horizontal_uncertainty</th>\n",
       "      <th>...</th>\n",
       "      <th>standard_error</th>\n",
       "      <th>used_phase_count</th>\n",
       "      <th>station_count</th>\n",
       "      <th>vertical_uncertainty</th>\n",
       "      <th>updated</th>\n",
       "      <th>author</th>\n",
       "      <th>agency_id</th>\n",
       "      <th>creation_time</th>\n",
       "      <th>version</th>\n",
       "      <th>stations</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2007-08-06 08:48:40.010</td>\n",
       "      <td>39.4635</td>\n",
       "      <td>-111.2277</td>\n",
       "      <td>410.0</td>\n",
       "      <td>4.37</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248839</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>1.7356</td>\n",
       "      <td>0.0</td>\n",
       "      <td>134.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 20:33:13.618110976</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 20:33:13.618111</td>\n",
       "      <td></td>\n",
       "      <td>DUG, GMR, H13A, HLID, I11A, I13A, J11A, J12A, ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2007-08-07 02:14:24.080</td>\n",
       "      <td>39.4632</td>\n",
       "      <td>-111.2230</td>\n",
       "      <td>4180.0</td>\n",
       "      <td>1.26</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248883</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.8834</td>\n",
       "      <td>0.0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 21:10:26.864045056</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 21:10:26.864045</td>\n",
       "      <td></td>\n",
       "      <td>DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2007-08-07 03:44:18.470</td>\n",
       "      <td>39.4625</td>\n",
       "      <td>-111.2152</td>\n",
       "      <td>4160.0</td>\n",
       "      <td>1.45</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248887</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.5716</td>\n",
       "      <td>0.0</td>\n",
       "      <td>15.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 21:10:27.576204032</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 21:10:27.576204</td>\n",
       "      <td></td>\n",
       "      <td>DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2007-08-07 07:13:05.760</td>\n",
       "      <td>39.4605</td>\n",
       "      <td>-111.2242</td>\n",
       "      <td>3240.0</td>\n",
       "      <td>2.24</td>\n",
       "      <td></td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248891</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9901</td>\n",
       "      <td>0.0</td>\n",
       "      <td>35.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2012-04-12 10:19:26.228029952</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>NaT</td>\n",
       "      <td></td>\n",
       "      <td>DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2007-08-07 02:05:04.490</td>\n",
       "      <td>39.4648</td>\n",
       "      <td>-111.2255</td>\n",
       "      <td>1790.0</td>\n",
       "      <td>2.08</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248882</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9935</td>\n",
       "      <td>0.0</td>\n",
       "      <td>35.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 21:15:19.190404096</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 21:15:19.190404</td>\n",
       "      <td></td>\n",
       "      <td>DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                     time  latitude  longitude   depth  magnitude  \\\n",
       "0 2007-08-06 08:48:40.010   39.4635  -111.2277   410.0       4.37   \n",
       "1 2007-08-07 02:14:24.080   39.4632  -111.2230  4180.0       1.26   \n",
       "2 2007-08-07 03:44:18.470   39.4625  -111.2152  4160.0       1.45   \n",
       "3 2007-08-07 07:13:05.760   39.4605  -111.2242  3240.0       2.24   \n",
       "4 2007-08-07 02:05:04.490   39.4648  -111.2255  1790.0       2.08   \n",
       "\n",
       "  event_description  associated_phase_count  azimuthal_gap          event_id  \\\n",
       "0                LR                     0.0            NaN  smi:local/248839   \n",
       "1                LR                     0.0            NaN  smi:local/248883   \n",
       "2                LR                     0.0            NaN  smi:local/248887   \n",
       "3                                       0.0            NaN  smi:local/248891   \n",
       "4                LR                     0.0            NaN  smi:local/248882   \n",
       "\n",
       "   horizontal_uncertainty  ...  standard_error  used_phase_count  \\\n",
       "0                     NaN  ...          1.7356               0.0   \n",
       "1                     NaN  ...          0.8834               0.0   \n",
       "2                     NaN  ...          0.5716               0.0   \n",
       "3                     NaN  ...          0.9901               0.0   \n",
       "4                     NaN  ...          0.9935               0.0   \n",
       "\n",
       "   station_count vertical_uncertainty                       updated  author  \\\n",
       "0          134.0                  NaN 2018-10-10 20:33:13.618110976      DC   \n",
       "1           14.0                  NaN 2018-10-10 21:10:26.864045056      DC   \n",
       "2           15.0                  NaN 2018-10-10 21:10:27.576204032      DC   \n",
       "3           35.0                  NaN 2012-04-12 10:19:26.228029952           \n",
       "4           35.0                  NaN 2018-10-10 21:15:19.190404096      DC   \n",
       "\n",
       "   agency_id              creation_time  version  \\\n",
       "0      NIOSH 2018-10-10 20:33:13.618111            \n",
       "1      NIOSH 2018-10-10 21:10:26.864045            \n",
       "2      NIOSH 2018-10-10 21:10:27.576204            \n",
       "3                                   NaT            \n",
       "4      NIOSH 2018-10-10 21:15:19.190404            \n",
       "\n",
       "                                            stations  \n",
       "0  DUG, GMR, H13A, HLID, I11A, I13A, J11A, J12A, ...  \n",
       "1  DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...  \n",
       "2  DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...  \n",
       "3  DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...  \n",
       "4  DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "crandall = obsplus.load_dataset('crandall_test')\n",
    "cat = crandall.event_client.get_events()\n",
    "ev_df = obsplus.events_to_df(cat)\n",
    "\n",
    "ev_df.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "`events_to_df` can also operate on other `event_client`s, like the `EventBank`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>time</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>depth</th>\n",
       "      <th>magnitude</th>\n",
       "      <th>event_description</th>\n",
       "      <th>associated_phase_count</th>\n",
       "      <th>azimuthal_gap</th>\n",
       "      <th>event_id</th>\n",
       "      <th>horizontal_uncertainty</th>\n",
       "      <th>...</th>\n",
       "      <th>standard_error</th>\n",
       "      <th>used_phase_count</th>\n",
       "      <th>station_count</th>\n",
       "      <th>vertical_uncertainty</th>\n",
       "      <th>updated</th>\n",
       "      <th>author</th>\n",
       "      <th>agency_id</th>\n",
       "      <th>creation_time</th>\n",
       "      <th>version</th>\n",
       "      <th>stations</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2007-08-06 08:48:40.010</td>\n",
       "      <td>39.4635</td>\n",
       "      <td>-111.2277</td>\n",
       "      <td>410.0</td>\n",
       "      <td>4.37</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248839</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>1.7356</td>\n",
       "      <td>0.0</td>\n",
       "      <td>134.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 20:33:13.618110976</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 20:33:13.618111</td>\n",
       "      <td></td>\n",
       "      <td>DUG, GMR, H13A, HLID, I11A, I13A, J11A, J12A, ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2007-08-07 02:14:24.080</td>\n",
       "      <td>39.4632</td>\n",
       "      <td>-111.2230</td>\n",
       "      <td>4180.0</td>\n",
       "      <td>1.26</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248883</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.8834</td>\n",
       "      <td>0.0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 21:10:26.864045056</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 21:10:26.864045</td>\n",
       "      <td></td>\n",
       "      <td>DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2007-08-07 03:44:18.470</td>\n",
       "      <td>39.4625</td>\n",
       "      <td>-111.2152</td>\n",
       "      <td>4160.0</td>\n",
       "      <td>1.45</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248887</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.5716</td>\n",
       "      <td>0.0</td>\n",
       "      <td>15.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 21:10:27.576204032</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 21:10:27.576204</td>\n",
       "      <td></td>\n",
       "      <td>DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2007-08-07 07:13:05.760</td>\n",
       "      <td>39.4605</td>\n",
       "      <td>-111.2242</td>\n",
       "      <td>3240.0</td>\n",
       "      <td>2.24</td>\n",
       "      <td></td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248891</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9901</td>\n",
       "      <td>0.0</td>\n",
       "      <td>35.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2012-04-12 10:19:26.228029952</td>\n",
       "      <td></td>\n",
       "      <td></td>\n",
       "      <td>NaT</td>\n",
       "      <td></td>\n",
       "      <td>DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2007-08-07 02:05:04.490</td>\n",
       "      <td>39.4648</td>\n",
       "      <td>-111.2255</td>\n",
       "      <td>1790.0</td>\n",
       "      <td>2.08</td>\n",
       "      <td>LR</td>\n",
       "      <td>0.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>smi:local/248882</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>0.9935</td>\n",
       "      <td>0.0</td>\n",
       "      <td>35.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2018-10-10 21:15:19.190404096</td>\n",
       "      <td>DC</td>\n",
       "      <td>NIOSH</td>\n",
       "      <td>2018-10-10 21:15:19.190404</td>\n",
       "      <td></td>\n",
       "      <td>DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                     time  latitude  longitude   depth  magnitude  \\\n",
       "0 2007-08-06 08:48:40.010   39.4635  -111.2277   410.0       4.37   \n",
       "1 2007-08-07 02:14:24.080   39.4632  -111.2230  4180.0       1.26   \n",
       "2 2007-08-07 03:44:18.470   39.4625  -111.2152  4160.0       1.45   \n",
       "3 2007-08-07 07:13:05.760   39.4605  -111.2242  3240.0       2.24   \n",
       "4 2007-08-07 02:05:04.490   39.4648  -111.2255  1790.0       2.08   \n",
       "\n",
       "  event_description  associated_phase_count  azimuthal_gap          event_id  \\\n",
       "0                LR                     0.0            NaN  smi:local/248839   \n",
       "1                LR                     0.0            NaN  smi:local/248883   \n",
       "2                LR                     0.0            NaN  smi:local/248887   \n",
       "3                                       0.0            NaN  smi:local/248891   \n",
       "4                LR                     0.0            NaN  smi:local/248882   \n",
       "\n",
       "   horizontal_uncertainty  ...  standard_error  used_phase_count  \\\n",
       "0                     NaN  ...          1.7356               0.0   \n",
       "1                     NaN  ...          0.8834               0.0   \n",
       "2                     NaN  ...          0.5716               0.0   \n",
       "3                     NaN  ...          0.9901               0.0   \n",
       "4                     NaN  ...          0.9935               0.0   \n",
       "\n",
       "   station_count vertical_uncertainty                       updated  author  \\\n",
       "0          134.0                  NaN 2018-10-10 20:33:13.618110976      DC   \n",
       "1           14.0                  NaN 2018-10-10 21:10:26.864045056      DC   \n",
       "2           15.0                  NaN 2018-10-10 21:10:27.576204032      DC   \n",
       "3           35.0                  NaN 2012-04-12 10:19:26.228029952           \n",
       "4           35.0                  NaN 2018-10-10 21:15:19.190404096      DC   \n",
       "\n",
       "   agency_id              creation_time  version  \\\n",
       "0      NIOSH 2018-10-10 20:33:13.618111            \n",
       "1      NIOSH 2018-10-10 21:10:26.864045            \n",
       "2      NIOSH 2018-10-10 21:10:27.576204            \n",
       "3                                   NaT            \n",
       "4      NIOSH 2018-10-10 21:15:19.190404            \n",
       "\n",
       "                                            stations  \n",
       "0  DUG, GMR, H13A, HLID, I11A, I13A, J11A, J12A, ...  \n",
       "1  DUG, P14A, P15A, P16A, P18A, Q14A, Q16A, Q18A,...  \n",
       "2  DUG, N17A, P14A, P16A, P18A, Q14A, Q16A, Q18A,...  \n",
       "3  DUG, L15A, M14A, M15A, M16A, N14A, N15A, N16A,...  \n",
       "4  DUG, L15A, M14A, M15A, N14A, N15A, N16A, N17A,...  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "bank = crandall.event_client\n",
    "ev_df2 = obsplus.events_to_df(bank)\n",
    "ev_df2.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now we have access to all the wonderful Pandas magics. Here are a few contrived examples of things we may want to do:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "# plot a histogram of magnitudes\n",
    "ev_df.magnitude.hist()\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Since there aren't a lot of events let's look at the picks to make things slightly more interesting:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "# get pick info into a dataframe\n",
    "picks = obsplus.picks_to_df(cat)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "P     384\n",
       "S      85\n",
       "Pb     72\n",
       "Sb     40\n",
       "?      33\n",
       "Name: phase_hint, dtype: int64"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# count the types of phase picks made on all events\n",
    "picks.phase_hint.value_counts()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "event_id\n",
       "smi:local/248828   2007-08-06 01:46:30.424280\n",
       "smi:local/248839   2007-08-06 08:50:18.697470\n",
       "smi:local/248843   2007-08-06 10:49:02.491970\n",
       "smi:local/248882   2007-08-07 02:06:40.963320\n",
       "smi:local/248883   2007-08-07 02:15:24.573490\n",
       "smi:local/248887   2007-08-07 03:45:22.084660\n",
       "smi:local/248891   2007-08-07 07:14:24.078630\n",
       "smi:local/248925   2007-08-07 21:43:54.936950\n",
       "Name: time, dtype: datetime64[ns]"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# calculate the max pick_time for each event\n",
    "picks.groupby('event_id')['time'].max()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We could also calculate travel time stats grouped by stations on stations with at least 3 P picks.\n",
    "Since all the events are coming from roughly the same location (within a few km) we might look for stations that have high standard deviations or obvious outliers as on the the first steps in quality control."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>count</th>\n",
       "      <th>mean</th>\n",
       "      <th>std</th>\n",
       "      <th>min</th>\n",
       "      <th>25%</th>\n",
       "      <th>50%</th>\n",
       "      <th>75%</th>\n",
       "      <th>max</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>station</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>DUG</th>\n",
       "      <td>6</td>\n",
       "      <td>0 days 00:00:26.450391666</td>\n",
       "      <td>0 days 00:00:00.271624748</td>\n",
       "      <td>0 days 00:00:26.071740</td>\n",
       "      <td>0 days 00:00:26.329110</td>\n",
       "      <td>0 days 00:00:26.405940</td>\n",
       "      <td>0 days 00:00:26.613517500</td>\n",
       "      <td>0 days 00:00:26.832520</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>L15A</th>\n",
       "      <td>4</td>\n",
       "      <td>0 days 00:00:44.281470</td>\n",
       "      <td>0 days 00:00:00.395213333</td>\n",
       "      <td>0 days 00:00:43.904210</td>\n",
       "      <td>0 days 00:00:43.958120</td>\n",
       "      <td>0 days 00:00:44.299440</td>\n",
       "      <td>0 days 00:00:44.622790</td>\n",
       "      <td>0 days 00:00:44.622790</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M14A</th>\n",
       "      <td>3</td>\n",
       "      <td>0 days 00:00:42.733800</td>\n",
       "      <td>0 days 00:00:00.232198731</td>\n",
       "      <td>0 days 00:00:42.465680</td>\n",
       "      <td>0 days 00:00:42.666770</td>\n",
       "      <td>0 days 00:00:42.867860</td>\n",
       "      <td>0 days 00:00:42.867860</td>\n",
       "      <td>0 days 00:00:42.867860</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M15A</th>\n",
       "      <td>6</td>\n",
       "      <td>0 days 00:00:37.389573333</td>\n",
       "      <td>0 days 00:00:00.395734547</td>\n",
       "      <td>0 days 00:00:36.924550</td>\n",
       "      <td>0 days 00:00:37.155292500</td>\n",
       "      <td>0 days 00:00:37.276860</td>\n",
       "      <td>0 days 00:00:37.723365</td>\n",
       "      <td>0 days 00:00:37.872200</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N14A</th>\n",
       "      <td>4</td>\n",
       "      <td>0 days 00:00:34.753022500</td>\n",
       "      <td>0 days 00:00:00.309191321</td>\n",
       "      <td>0 days 00:00:34.382170</td>\n",
       "      <td>0 days 00:00:34.556087500</td>\n",
       "      <td>0 days 00:00:34.810995</td>\n",
       "      <td>0 days 00:00:35.007930</td>\n",
       "      <td>0 days 00:00:35.007930</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N15A</th>\n",
       "      <td>4</td>\n",
       "      <td>0 days 00:00:30.787567500</td>\n",
       "      <td>0 days 00:00:00.678323974</td>\n",
       "      <td>0 days 00:00:30.187990</td>\n",
       "      <td>0 days 00:00:30.206282500</td>\n",
       "      <td>0 days 00:00:30.793665</td>\n",
       "      <td>0 days 00:00:31.374950</td>\n",
       "      <td>0 days 00:00:31.374950</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N16A</th>\n",
       "      <td>3</td>\n",
       "      <td>0 days 00:00:27.035340</td>\n",
       "      <td>0 days 00:00:00.319788540</td>\n",
       "      <td>0 days 00:00:26.666080</td>\n",
       "      <td>0 days 00:00:26.943025</td>\n",
       "      <td>0 days 00:00:27.219970</td>\n",
       "      <td>0 days 00:00:27.219970</td>\n",
       "      <td>0 days 00:00:27.219970</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N17A</th>\n",
       "      <td>3</td>\n",
       "      <td>0 days 00:00:28.347476666</td>\n",
       "      <td>0 days 00:00:00.111948217</td>\n",
       "      <td>0 days 00:00:28.218210</td>\n",
       "      <td>0 days 00:00:28.315160</td>\n",
       "      <td>0 days 00:00:28.412110</td>\n",
       "      <td>0 days 00:00:28.412110</td>\n",
       "      <td>0 days 00:00:28.412110</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>N18A</th>\n",
       "      <td>3</td>\n",
       "      <td>0 days 00:00:34.095483333</td>\n",
       "      <td>0 days 00:00:00.503778524</td>\n",
       "      <td>0 days 00:00:33.513770</td>\n",
       "      <td>0 days 00:00:33.950055</td>\n",
       "      <td>0 days 00:00:34.386340</td>\n",
       "      <td>0 days 00:00:34.386340</td>\n",
       "      <td>0 days 00:00:34.386340</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>O15A</th>\n",
       "      <td>5</td>\n",
       "      <td>0 days 00:00:24.222288400</td>\n",
       "      <td>0 days 00:00:00.158953507</td>\n",
       "      <td>0 days 00:00:24.049170</td>\n",
       "      <td>0 days 00:00:24.049170</td>\n",
       "      <td>0 days 00:00:24.314742</td>\n",
       "      <td>0 days 00:00:24.335500</td>\n",
       "      <td>0 days 00:00:24.362860</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>O16A</th>\n",
       "      <td>3</td>\n",
       "      <td>0 days 00:00:14.805791333</td>\n",
       "      <td>0 days 00:00:00.214392546</td>\n",
       "      <td>0 days 00:00:14.558760</td>\n",
       "      <td>0 days 00:00:14.737037</td>\n",
       "      <td>0 days 00:00:14.915314</td>\n",
       "      <td>0 days 00:00:14.929307</td>\n",
       "      <td>0 days 00:00:14.943300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>O18A</th>\n",
       "      <td>5</td>\n",
       "      <td>0 days 00:00:23.389030200</td>\n",
       "      <td>0 days 00:00:00.425951696</td>\n",
       "      <td>0 days 00:00:22.925160</td>\n",
       "      <td>0 days 00:00:23.116750</td>\n",
       "      <td>0 days 00:00:23.224960</td>\n",
       "      <td>0 days 00:00:23.792720</td>\n",
       "      <td>0 days 00:00:23.885561</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P14A</th>\n",
       "      <td>8</td>\n",
       "      <td>0 days 00:00:26.757380</td>\n",
       "      <td>0 days 00:00:00.369050089</td>\n",
       "      <td>0 days 00:00:26.272320</td>\n",
       "      <td>0 days 00:00:26.410845</td>\n",
       "      <td>0 days 00:00:26.791710</td>\n",
       "      <td>0 days 00:00:27.140000</td>\n",
       "      <td>0 days 00:00:27.143660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P15A</th>\n",
       "      <td>9</td>\n",
       "      <td>0 days 00:00:16.204747666</td>\n",
       "      <td>0 days 00:00:00.692561976</td>\n",
       "      <td>0 days 00:00:15.271110</td>\n",
       "      <td>0 days 00:00:15.920450</td>\n",
       "      <td>0 days 00:00:16.195300</td>\n",
       "      <td>0 days 00:00:16.614280</td>\n",
       "      <td>0 days 00:00:17.513850</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P16A</th>\n",
       "      <td>11</td>\n",
       "      <td>0 days 00:00:07.927102</td>\n",
       "      <td>0 days 00:00:00.215584258</td>\n",
       "      <td>0 days 00:00:07.682190</td>\n",
       "      <td>0 days 00:00:07.795410</td>\n",
       "      <td>0 days 00:00:07.859270</td>\n",
       "      <td>0 days 00:00:08.034686</td>\n",
       "      <td>0 days 00:00:08.397620</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P17A</th>\n",
       "      <td>6</td>\n",
       "      <td>0 days 00:00:07.174232666</td>\n",
       "      <td>0 days 00:00:00.289962934</td>\n",
       "      <td>0 days 00:00:06.905530</td>\n",
       "      <td>0 days 00:00:06.943467500</td>\n",
       "      <td>0 days 00:00:07.091821500</td>\n",
       "      <td>0 days 00:00:07.364075500</td>\n",
       "      <td>0 days 00:00:07.607380</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>P18A</th>\n",
       "      <td>11</td>\n",
       "      <td>0 days 00:00:14.736734454</td>\n",
       "      <td>0 days 00:00:00.293448302</td>\n",
       "      <td>0 days 00:00:14.258420</td>\n",
       "      <td>0 days 00:00:14.580390</td>\n",
       "      <td>0 days 00:00:14.690940</td>\n",
       "      <td>0 days 00:00:14.856656</td>\n",
       "      <td>0 days 00:00:15.265000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q14A</th>\n",
       "      <td>6</td>\n",
       "      <td>0 days 00:00:30.549576666</td>\n",
       "      <td>0 days 00:00:00.335974466</td>\n",
       "      <td>0 days 00:00:30.212890</td>\n",
       "      <td>0 days 00:00:30.306100</td>\n",
       "      <td>0 days 00:00:30.498545</td>\n",
       "      <td>0 days 00:00:30.690990</td>\n",
       "      <td>0 days 00:00:31.090390</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q15A</th>\n",
       "      <td>7</td>\n",
       "      <td>0 days 00:00:18.810036142</td>\n",
       "      <td>0 days 00:00:00.297412245</td>\n",
       "      <td>0 days 00:00:18.382690</td>\n",
       "      <td>0 days 00:00:18.592790</td>\n",
       "      <td>0 days 00:00:18.931850</td>\n",
       "      <td>0 days 00:00:18.977141500</td>\n",
       "      <td>0 days 00:00:19.215850</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q16A</th>\n",
       "      <td>10</td>\n",
       "      <td>0 days 00:00:10.165477800</td>\n",
       "      <td>0 days 00:00:00.328986240</td>\n",
       "      <td>0 days 00:00:09.618000</td>\n",
       "      <td>0 days 00:00:10.006930</td>\n",
       "      <td>0 days 00:00:10.153105</td>\n",
       "      <td>0 days 00:00:10.248371250</td>\n",
       "      <td>0 days 00:00:10.690000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q18A</th>\n",
       "      <td>11</td>\n",
       "      <td>0 days 00:00:17.135285636</td>\n",
       "      <td>0 days 00:00:00.256429698</td>\n",
       "      <td>0 days 00:00:16.894450</td>\n",
       "      <td>0 days 00:00:16.975725</td>\n",
       "      <td>0 days 00:00:17.010560</td>\n",
       "      <td>0 days 00:00:17.186767</td>\n",
       "      <td>0 days 00:00:17.665000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Q19A</th>\n",
       "      <td>3</td>\n",
       "      <td>0 days 00:00:29.604353333</td>\n",
       "      <td>0 days 00:00:00.383435634</td>\n",
       "      <td>0 days 00:00:29.161600</td>\n",
       "      <td>0 days 00:00:29.493665</td>\n",
       "      <td>0 days 00:00:29.825730</td>\n",
       "      <td>0 days 00:00:29.825730</td>\n",
       "      <td>0 days 00:00:29.825730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>R15A</th>\n",
       "      <td>4</td>\n",
       "      <td>0 days 00:00:27.445802500</td>\n",
       "      <td>0 days 00:00:00.545923743</td>\n",
       "      <td>0 days 00:00:26.713610</td>\n",
       "      <td>0 days 00:00:27.186507500</td>\n",
       "      <td>0 days 00:00:27.603435</td>\n",
       "      <td>0 days 00:00:27.862730</td>\n",
       "      <td>0 days 00:00:27.862730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>R17A</th>\n",
       "      <td>11</td>\n",
       "      <td>0 days 00:00:20.501155545</td>\n",
       "      <td>0 days 00:00:00.236867827</td>\n",
       "      <td>0 days 00:00:20.280000</td>\n",
       "      <td>0 days 00:00:20.351515</td>\n",
       "      <td>0 days 00:00:20.397810</td>\n",
       "      <td>0 days 00:00:20.510261</td>\n",
       "      <td>0 days 00:00:20.965000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>R18A</th>\n",
       "      <td>8</td>\n",
       "      <td>0 days 00:00:27.290727500</td>\n",
       "      <td>0 days 00:00:00.298790493</td>\n",
       "      <td>0 days 00:00:26.900100</td>\n",
       "      <td>0 days 00:00:27.151197500</td>\n",
       "      <td>0 days 00:00:27.153725</td>\n",
       "      <td>0 days 00:00:27.449397500</td>\n",
       "      <td>0 days 00:00:27.732590</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SRU</th>\n",
       "      <td>14</td>\n",
       "      <td>0 days 00:00:12.069393500</td>\n",
       "      <td>0 days 00:00:00.243053585</td>\n",
       "      <td>0 days 00:00:11.719920</td>\n",
       "      <td>0 days 00:00:11.960260250</td>\n",
       "      <td>0 days 00:00:12.020410</td>\n",
       "      <td>0 days 00:00:12.112279500</td>\n",
       "      <td>0 days 00:00:12.505000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "        count                      mean                       std  \\\n",
       "station                                                             \n",
       "DUG         6 0 days 00:00:26.450391666 0 days 00:00:00.271624748   \n",
       "L15A        4    0 days 00:00:44.281470 0 days 00:00:00.395213333   \n",
       "M14A        3    0 days 00:00:42.733800 0 days 00:00:00.232198731   \n",
       "M15A        6 0 days 00:00:37.389573333 0 days 00:00:00.395734547   \n",
       "N14A        4 0 days 00:00:34.753022500 0 days 00:00:00.309191321   \n",
       "N15A        4 0 days 00:00:30.787567500 0 days 00:00:00.678323974   \n",
       "N16A        3    0 days 00:00:27.035340 0 days 00:00:00.319788540   \n",
       "N17A        3 0 days 00:00:28.347476666 0 days 00:00:00.111948217   \n",
       "N18A        3 0 days 00:00:34.095483333 0 days 00:00:00.503778524   \n",
       "O15A        5 0 days 00:00:24.222288400 0 days 00:00:00.158953507   \n",
       "O16A        3 0 days 00:00:14.805791333 0 days 00:00:00.214392546   \n",
       "O18A        5 0 days 00:00:23.389030200 0 days 00:00:00.425951696   \n",
       "P14A        8    0 days 00:00:26.757380 0 days 00:00:00.369050089   \n",
       "P15A        9 0 days 00:00:16.204747666 0 days 00:00:00.692561976   \n",
       "P16A       11    0 days 00:00:07.927102 0 days 00:00:00.215584258   \n",
       "P17A        6 0 days 00:00:07.174232666 0 days 00:00:00.289962934   \n",
       "P18A       11 0 days 00:00:14.736734454 0 days 00:00:00.293448302   \n",
       "Q14A        6 0 days 00:00:30.549576666 0 days 00:00:00.335974466   \n",
       "Q15A        7 0 days 00:00:18.810036142 0 days 00:00:00.297412245   \n",
       "Q16A       10 0 days 00:00:10.165477800 0 days 00:00:00.328986240   \n",
       "Q18A       11 0 days 00:00:17.135285636 0 days 00:00:00.256429698   \n",
       "Q19A        3 0 days 00:00:29.604353333 0 days 00:00:00.383435634   \n",
       "R15A        4 0 days 00:00:27.445802500 0 days 00:00:00.545923743   \n",
       "R17A       11 0 days 00:00:20.501155545 0 days 00:00:00.236867827   \n",
       "R18A        8 0 days 00:00:27.290727500 0 days 00:00:00.298790493   \n",
       "SRU        14 0 days 00:00:12.069393500 0 days 00:00:00.243053585   \n",
       "\n",
       "                           min                       25%  \\\n",
       "station                                                    \n",
       "DUG     0 days 00:00:26.071740    0 days 00:00:26.329110   \n",
       "L15A    0 days 00:00:43.904210    0 days 00:00:43.958120   \n",
       "M14A    0 days 00:00:42.465680    0 days 00:00:42.666770   \n",
       "M15A    0 days 00:00:36.924550 0 days 00:00:37.155292500   \n",
       "N14A    0 days 00:00:34.382170 0 days 00:00:34.556087500   \n",
       "N15A    0 days 00:00:30.187990 0 days 00:00:30.206282500   \n",
       "N16A    0 days 00:00:26.666080    0 days 00:00:26.943025   \n",
       "N17A    0 days 00:00:28.218210    0 days 00:00:28.315160   \n",
       "N18A    0 days 00:00:33.513770    0 days 00:00:33.950055   \n",
       "O15A    0 days 00:00:24.049170    0 days 00:00:24.049170   \n",
       "O16A    0 days 00:00:14.558760    0 days 00:00:14.737037   \n",
       "O18A    0 days 00:00:22.925160    0 days 00:00:23.116750   \n",
       "P14A    0 days 00:00:26.272320    0 days 00:00:26.410845   \n",
       "P15A    0 days 00:00:15.271110    0 days 00:00:15.920450   \n",
       "P16A    0 days 00:00:07.682190    0 days 00:00:07.795410   \n",
       "P17A    0 days 00:00:06.905530 0 days 00:00:06.943467500   \n",
       "P18A    0 days 00:00:14.258420    0 days 00:00:14.580390   \n",
       "Q14A    0 days 00:00:30.212890    0 days 00:00:30.306100   \n",
       "Q15A    0 days 00:00:18.382690    0 days 00:00:18.592790   \n",
       "Q16A    0 days 00:00:09.618000    0 days 00:00:10.006930   \n",
       "Q18A    0 days 00:00:16.894450    0 days 00:00:16.975725   \n",
       "Q19A    0 days 00:00:29.161600    0 days 00:00:29.493665   \n",
       "R15A    0 days 00:00:26.713610 0 days 00:00:27.186507500   \n",
       "R17A    0 days 00:00:20.280000    0 days 00:00:20.351515   \n",
       "R18A    0 days 00:00:26.900100 0 days 00:00:27.151197500   \n",
       "SRU     0 days 00:00:11.719920 0 days 00:00:11.960260250   \n",
       "\n",
       "                              50%                       75%  \\\n",
       "station                                                       \n",
       "DUG        0 days 00:00:26.405940 0 days 00:00:26.613517500   \n",
       "L15A       0 days 00:00:44.299440    0 days 00:00:44.622790   \n",
       "M14A       0 days 00:00:42.867860    0 days 00:00:42.867860   \n",
       "M15A       0 days 00:00:37.276860    0 days 00:00:37.723365   \n",
       "N14A       0 days 00:00:34.810995    0 days 00:00:35.007930   \n",
       "N15A       0 days 00:00:30.793665    0 days 00:00:31.374950   \n",
       "N16A       0 days 00:00:27.219970    0 days 00:00:27.219970   \n",
       "N17A       0 days 00:00:28.412110    0 days 00:00:28.412110   \n",
       "N18A       0 days 00:00:34.386340    0 days 00:00:34.386340   \n",
       "O15A       0 days 00:00:24.314742    0 days 00:00:24.335500   \n",
       "O16A       0 days 00:00:14.915314    0 days 00:00:14.929307   \n",
       "O18A       0 days 00:00:23.224960    0 days 00:00:23.792720   \n",
       "P14A       0 days 00:00:26.791710    0 days 00:00:27.140000   \n",
       "P15A       0 days 00:00:16.195300    0 days 00:00:16.614280   \n",
       "P16A       0 days 00:00:07.859270    0 days 00:00:08.034686   \n",
       "P17A    0 days 00:00:07.091821500 0 days 00:00:07.364075500   \n",
       "P18A       0 days 00:00:14.690940    0 days 00:00:14.856656   \n",
       "Q14A       0 days 00:00:30.498545    0 days 00:00:30.690990   \n",
       "Q15A       0 days 00:00:18.931850 0 days 00:00:18.977141500   \n",
       "Q16A       0 days 00:00:10.153105 0 days 00:00:10.248371250   \n",
       "Q18A       0 days 00:00:17.010560    0 days 00:00:17.186767   \n",
       "Q19A       0 days 00:00:29.825730    0 days 00:00:29.825730   \n",
       "R15A       0 days 00:00:27.603435    0 days 00:00:27.862730   \n",
       "R17A       0 days 00:00:20.397810    0 days 00:00:20.510261   \n",
       "R18A       0 days 00:00:27.153725 0 days 00:00:27.449397500   \n",
       "SRU        0 days 00:00:12.020410 0 days 00:00:12.112279500   \n",
       "\n",
       "                           max  \n",
       "station                         \n",
       "DUG     0 days 00:00:26.832520  \n",
       "L15A    0 days 00:00:44.622790  \n",
       "M14A    0 days 00:00:42.867860  \n",
       "M15A    0 days 00:00:37.872200  \n",
       "N14A    0 days 00:00:35.007930  \n",
       "N15A    0 days 00:00:31.374950  \n",
       "N16A    0 days 00:00:27.219970  \n",
       "N17A    0 days 00:00:28.412110  \n",
       "N18A    0 days 00:00:34.386340  \n",
       "O15A    0 days 00:00:24.362860  \n",
       "O16A    0 days 00:00:14.943300  \n",
       "O18A    0 days 00:00:23.885561  \n",
       "P14A    0 days 00:00:27.143660  \n",
       "P15A    0 days 00:00:17.513850  \n",
       "P16A    0 days 00:00:08.397620  \n",
       "P17A    0 days 00:00:07.607380  \n",
       "P18A    0 days 00:00:15.265000  \n",
       "Q14A    0 days 00:00:31.090390  \n",
       "Q15A    0 days 00:00:19.215850  \n",
       "Q16A    0 days 00:00:10.690000  \n",
       "Q18A    0 days 00:00:17.665000  \n",
       "Q19A    0 days 00:00:29.825730  \n",
       "R15A    0 days 00:00:27.862730  \n",
       "R17A    0 days 00:00:20.965000  \n",
       "R18A    0 days 00:00:27.732590  \n",
       "SRU     0 days 00:00:12.505000  "
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# get only P picks\n",
    "df = picks[picks.phase_hint.str.upper() == 'P']\n",
    "\n",
    "# add columns for travel time\n",
    "df['travel_time'] = df['time'] - df['event_time']\n",
    "\n",
    "# filter out stations that aren't used at least 3 times\n",
    "station_count = df['station'].value_counts()\n",
    "stations_with_three = station_count[station_count > 2]\n",
    "\n",
    "# only include picks that are used on at least 3 stations\n",
    "df = df[df.station.isin(stations_with_three.index)]\n",
    "\n",
    "# get stats of travel times\n",
    "df.groupby('station')['travel_time'].describe()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In addition to `events_to_df` and `picks_to_df`, the following extractors are defined:\n",
    "\n",
    "- `arrivals_to_df` extracts arrival information from an Origin object (or from the preferred origin of each event in a catalog)\n",
    "- `amplitudes_to_df` extracts amplitude information\n",
    "- `station_magnitudes_to_df` extracts station magnitude information from a catalog, event, or magnitude\n",
    "- `magnitudes_to_df` extracts magnitude information"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.8"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
