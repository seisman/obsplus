{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# QuakeML to json\n",
    "\n",
    "\n",
    "<div class=\"alert alert-warning\">\n",
    "\n",
    "**Warning**: Much of this functionality will eventually be moved to obspy, see [this PR](https://github.com/obspy/obspy/pull/2210).\n",
    "\n",
    "</div>\n",
    "\n",
    "The following demonstrates obsplus' ability to serialize obspy catalog objects into json. All such conversions should be lossless.\n",
    "\n",
    "## Get a catalog"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "downloading waveform data for crandall_test dataset ...\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "[2020-02-21 00:50:02,969] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:02,971] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:02,972] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:02,972] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:03,360] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.39 seconds)\n",
      "[2020-02-21 00:50:03,394] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:03,396] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:03,399] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:04,381] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 7 channels (of 7)\n",
      "[2020-02-21 00:50:06,804] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 41 channels (of 50)\n",
      "[2020-02-21 00:50:06,805] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:06,860] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.4 MB [129.83 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:06,861] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:06,861] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:07,017] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.P17A.xml'.\n",
      "[2020-02-21 00:50:07,018] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.Q15A.xml'.\n",
      "[2020-02-21 00:50:07,019] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.P15A.xml'.\n",
      "[2020-02-21 00:50:07,162] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.P16A.xml'.\n",
      "[2020-02-21 00:50:07,171] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.P18A.xml'.\n",
      "[2020-02-21 00:50:07,177] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.Q16A.xml'.\n",
      "[2020-02-21 00:50:07,311] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/UU.CTU.xml'.\n",
      "[2020-02-21 00:50:07,313] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.Q18A.xml'.\n",
      "[2020-02-21 00:50:07,326] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.O15A.xml'.\n",
      "[2020-02-21 00:50:07,459] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/UU.MPU.xml'.\n",
      "[2020-02-21 00:50:07,467] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.R17A.xml'.\n",
      "[2020-02-21 00:50:07,480] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/UU.NLU.xml'.\n",
      "[2020-02-21 00:50:07,609] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.O16A.xml'.\n",
      "[2020-02-21 00:50:07,616] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.O18A.xml'.\n",
      "[2020-02-21 00:50:07,763] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/UU.SRU.xml'.\n",
      "[2020-02-21 00:50:07,768] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/UU.TMU.xml'.\n",
      "[2020-02-21 00:50:07,786] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 16 station files [0.4 MB] in 0.9 seconds [471.64 KB/sec].\n",
      "[2020-02-21 00:50:07,787] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:07,788] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:07,788] - obspy.clients.fdsn.mass_downloader - INFO: 0 StationXML files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:07,790] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 48 MiniSEED files [0.4 MB].\n",
      "[2020-02-21 00:50:07,791] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 16 StationXML files [0.4 MB].\n",
      "[2020-02-21 00:50:07,791] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.8 MB in total.\n",
      "[2020-02-21 00:50:08,003] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:08,005] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:08,005] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:08,006] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:08,443] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.44 seconds)\n",
      "[2020-02-21 00:50:08,475] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:08,477] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:08,482] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:09,358] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 7 channels (of 7)\n",
      "[2020-02-21 00:50:12,589] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 44 channels (of 50)\n",
      "[2020-02-21 00:50:12,591] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:12,654] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [73.17 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:12,655] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:12,655] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:12,830] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded '/home/runner/opsdata/crandall_test/stations/TA.R16A.xml'.\n",
      "[2020-02-21 00:50:12,832] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 1 station files [0.0 MB] in 0.2 seconds [147.03 KB/sec].\n",
      "[2020-02-21 00:50:12,833] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:12,834] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:12,834] - obspy.clients.fdsn.mass_downloader - INFO: 16 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:12,837] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 51 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:12,839] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 1 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:12,839] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n",
      "[2020-02-21 00:50:13,038] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:13,040] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:13,041] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:13,042] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:13,406] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.36 seconds)\n",
      "[2020-02-21 00:50:13,434] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:13,435] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:13,440] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:14,199] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 6 channels (of 7)\n",
      "[2020-02-21 00:50:14,642] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 45 channels (of 50)\n",
      "[2020-02-21 00:50:14,643] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:14,700] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [263.92 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:14,701] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:14,702] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:14,723] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:14,723] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:14,724] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:14,725] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:14,726] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 51 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:14,726] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:14,728] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n",
      "[2020-02-21 00:50:14,907] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:14,908] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:14,909] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:14,909] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:15,277] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.37 seconds)\n",
      "[2020-02-21 00:50:15,304] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:15,306] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:15,309] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:15,976] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 7 channels (of 7)\n",
      "[2020-02-21 00:50:16,340] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 44 channels (of 50)\n",
      "[2020-02-21 00:50:16,341] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:16,402] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [310.41 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:16,403] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:16,403] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:16,427] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:16,428] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:16,428] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:16,429] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:16,430] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 51 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:16,432] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:16,433] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n",
      "[2020-02-21 00:50:16,636] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:16,638] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:16,638] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:16,639] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:17,000] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.36 seconds)\n",
      "[2020-02-21 00:50:17,031] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:17,033] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:17,037] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:17,692] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 7 channels (of 7)\n",
      "[2020-02-21 00:50:18,140] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 44 channels (of 50)\n",
      "[2020-02-21 00:50:18,142] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:18,198] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [295.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:18,200] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:18,200] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:18,222] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:18,223] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:18,223] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:18,224] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:18,226] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 51 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:18,226] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:18,227] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n",
      "[2020-02-21 00:50:18,418] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:18,420] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:18,421] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:18,421] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:18,764] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.34 seconds)\n",
      "[2020-02-21 00:50:18,791] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:18,793] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:18,797] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:19,545] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 4 channels (of 7)\n",
      "[2020-02-21 00:50:19,883] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 44 channels (of 50)\n",
      "[2020-02-21 00:50:19,886] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:19,943] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [262.97 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:19,944] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:19,945] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:19,965] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:19,966] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:19,967] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:19,968] - obspy.clients.fdsn.mass_downloader - INFO: 16 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:19,969] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 48 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:19,969] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:19,970] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n",
      "[2020-02-21 00:50:20,156] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:20,158] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:20,159] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:20,160] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:20,597] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.44 seconds)\n",
      "[2020-02-21 00:50:20,625] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:20,627] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:20,630] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:21,423] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 6 channels (of 7)\n",
      "[2020-02-21 00:50:22,334] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 45 channels (of 50)\n",
      "[2020-02-21 00:50:22,335] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:22,397] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [188.18 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:22,398] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:22,398] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:22,433] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:22,434] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:22,435] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:22,436] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:22,437] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 51 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:22,438] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:22,439] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n",
      "[2020-02-21 00:50:22,625] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:22,627] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:22,627] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:22,628] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:22,998] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.37 seconds)\n",
      "[2020-02-21 00:50:23,026] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:23,028] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:23,031] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 57 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:23,812] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 3 channels (of 7)\n",
      "[2020-02-21 00:50:25,967] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully downloaded 45 channels (of 50)\n",
      "[2020-02-21 00:50:25,969] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:26,028] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.3 MB [107.47 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:26,029] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:26,029] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels after downloading: DOWNLOADED\n",
      "[2020-02-21 00:50:26,052] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:26,053] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:26,054] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.\n",
      "[2020-02-21 00:50:26,055] - obspy.clients.fdsn.mass_downloader - INFO: 16 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:26,056] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 48 MiniSEED files [0.3 MB].\n",
      "[2020-02-21 00:50:26,057] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:26,058] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.3 MB in total.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "finished downloading waveform data for crandall_test\n",
      "downloading station data for crandall_test dataset ...\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "[2020-02-21 00:50:27,754] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:27,756] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:27,757] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:27,757] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:28,199] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.44 seconds)\n",
      "[2020-02-21 00:50:28,231] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:28,233] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:28,237] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:28,237] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:28,681] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:28,683] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:28,684] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:28,684] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:28,685] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:28,710] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:28,712] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:28,713] - obspy.clients.fdsn.mass_downloader - INFO: 48 MiniSEED files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:28,714] - obspy.clients.fdsn.mass_downloader - INFO: 16 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:28,714] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:28,715] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:28,716] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:28,812] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:28,814] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:28,814] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:28,815] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:29,183] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.37 seconds)\n",
      "[2020-02-21 00:50:29,210] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:29,212] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:29,215] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:29,216] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:29,656] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:29,657] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:29,658] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:29,659] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:29,659] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:29,684] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:29,685] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:29,686] - obspy.clients.fdsn.mass_downloader - INFO: 51 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:29,687] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:29,688] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:29,689] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:29,689] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:29,791] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:29,793] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:29,793] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:29,794] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:30,142] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.35 seconds)\n",
      "[2020-02-21 00:50:30,172] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:30,174] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:30,177] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:30,177] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:30,576] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:30,577] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:30,578] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:30,579] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:30,579] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:30,604] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:30,605] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:30,606] - obspy.clients.fdsn.mass_downloader - INFO: 51 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:30,607] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:30,607] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:30,608] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:30,609] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:30,702] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:30,704] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:30,705] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:30,705] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:31,077] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.37 seconds)\n",
      "[2020-02-21 00:50:31,106] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:31,108] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:31,112] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:31,113] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:31,562] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:31,564] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:31,564] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:31,565] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:31,566] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:31,588] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:31,589] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:31,590] - obspy.clients.fdsn.mass_downloader - INFO: 51 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:31,591] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:31,592] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:31,592] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:31,593] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:31,685] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:31,687] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:31,687] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:31,688] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:32,070] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.38 seconds)\n",
      "[2020-02-21 00:50:32,099] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:32,101] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:32,104] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:32,105] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:32,551] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:32,553] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:32,554] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:32,554] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:32,555] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:32,578] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:32,579] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:32,580] - obspy.clients.fdsn.mass_downloader - INFO: 51 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:32,581] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:32,582] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:32,582] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:32,583] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:32,679] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:32,681] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:32,682] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:32,683] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:33,118] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.43 seconds)\n",
      "[2020-02-21 00:50:33,147] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:33,148] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:33,151] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:33,152] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:33,595] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:33,596] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:33,597] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:33,597] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:33,598] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:33,619] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:33,620] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:33,621] - obspy.clients.fdsn.mass_downloader - INFO: 48 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:33,622] - obspy.clients.fdsn.mass_downloader - INFO: 16 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:33,622] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:33,623] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:33,623] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:33,715] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:33,717] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:33,718] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:33,718] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:34,080] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.36 seconds)\n",
      "[2020-02-21 00:50:34,115] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:34,117] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:34,120] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:34,120] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:34,515] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:34,516] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:34,517] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:34,518] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 6 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:34,518] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 51 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:34,543] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:34,544] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:34,545] - obspy.clients.fdsn.mass_downloader - INFO: 51 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:34,546] - obspy.clients.fdsn.mass_downloader - INFO: 17 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:34,547] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:34,547] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:34,548] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n",
      "[2020-02-21 00:50:34,640] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for http://service.iris.edu.\n",
      "[2020-02-21 00:50:34,642] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): http://service.iris.edu.\n",
      "[2020-02-21 00:50:34,643] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0\n",
      "[2020-02-21 00:50:34,643] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Requesting reliable availability.\n",
      "[2020-02-21 00:50:35,006] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Successfully requested availability (0.36 seconds)\n",
      "[2020-02-21 00:50:35,035] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Found 19 stations (57 channels).\n",
      "[2020-02-21 00:50:35,037] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Will attempt to download data from 19 stations.\n",
      "[2020-02-21 00:50:35,040] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels before downloading: EXISTS\n",
      "[2020-02-21 00:50:35,041] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels before downloading: NEEDS_DOWNLOADING\n",
      "[2020-02-21 00:50:35,429] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No data available for request.\n",
      "[2020-02-21 00:50:35,430] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Launching basic QC checks...\n",
      "[2020-02-21 00:50:35,432] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Downloaded 0.0 MB [0.00 KB/sec] of data, 0.0 MB of which were discarded afterwards.\n",
      "[2020-02-21 00:50:35,433] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 9 time intervals/channels after downloading: DOWNLOAD_FAILED\n",
      "[2020-02-21 00:50:35,433] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Status for 48 time intervals/channels after downloading: EXISTS\n",
      "[2020-02-21 00:50:35,454] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - No station information to download.\n",
      "[2020-02-21 00:50:35,455] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report\n",
      "[2020-02-21 00:50:35,456] - obspy.clients.fdsn.mass_downloader - INFO: 48 MiniSEED files [0.3 MB] already existed.\n",
      "[2020-02-21 00:50:35,457] - obspy.clients.fdsn.mass_downloader - INFO: 16 StationXML files [0.4 MB] already existed.\n",
      "[2020-02-21 00:50:35,458] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 MiniSEED files [0.0 MB].\n",
      "[2020-02-21 00:50:35,458] - obspy.clients.fdsn.mass_downloader - INFO: Client 'http://service.iris.edu' - Acquired 0 StationXML files [0.0 MB].\n",
      "[2020-02-21 00:50:35,459] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 0.0 MB in total.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "finished downloading station data for crandall_test\n",
      "downloading event data for crandall_test dataset ...\n",
      "finished downloading event data for crandall_test\n",
      "8 Event(s) in Catalog:\n",
      "2007-08-06T08:48:40.010000Z | +39.464, -111.228 | 4.2 mb\n",
      "2007-08-07T02:14:24.080000Z | +39.463, -111.223 | 1.17 ml\n",
      "2007-08-07T03:44:18.470000Z | +39.462, -111.215 | 1.68 ml\n",
      "2007-08-07T07:13:05.760000Z | +39.461, -111.224 | 2.55 ml\n",
      "2007-08-07T02:05:04.490000Z | +39.465, -111.225 | 2.44 ml\n",
      "2007-08-06T10:47:25.600000Z | +39.462, -111.232 | 1.92 ml\n",
      "2007-08-07T21:42:51.130000Z | +39.463, -111.220 | 1.88 ml\n",
      "2007-08-06T01:44:48.810000Z | +39.462, -111.238 | 2.32 ml\n"
     ]
    }
   ],
   "source": [
    "import obspy\n",
    "import obsplus\n",
    "\n",
    "crandall = obsplus.load_dataset('crandall_test')\n",
    "\n",
    "cat = crandall.event_client.get_events()\n",
    "\n",
    "print(cat)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## json conversions"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{\"events\": [{\"resource_id\": {\"id\": \"smi:local/248839\"}, \"event_type\": null, \"event_type_certainty\": null, \"creation_info\": {\"agency_id\": \"NIOSH\", \"agency_uri\": null, \"author\": \"DC\", \"author_uri\": null, \"creation_time\": \"2018-10-10T20:33:13.618111Z\", \"version\": null}, \"event_descriptions\": [{\"text\": \"LR\", \"type\": null}], \"comments\": [], \"picks\": [{\"resource_id\": {\"id\": \"smi:local/21691352\"}, \"time\"\n"
     ]
    }
   ],
   "source": [
    "import obsplus\n",
    "\n",
    "# convert to json str\n",
    "json_str = obsplus.cat_to_json(cat)\n",
    "\n",
    "# print sample\n",
    "print(json_str[0:400])\n",
    "\n",
    "# convert back\n",
    "cat2 = obsplus.json_to_cat(json_str)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "# json serialization should be lossless after handling Quantity Errors\n",
    "# this won't be needed once obspy 1.2.0 is released.\n",
    "import obspy.core.event as ev\n",
    "\n",
    "from obsplus.utils import yield_obj_parent_attr\n",
    "\n",
    "\n",
    "def _remove_empty_quantity_errors(catalog):\n",
    "    \"\"\"\n",
    "    Copy the catalog and set all empty QunatityErrors to None.\n",
    "    This is needed to check equality of catalogs that may have\n",
    "    None or empty QuantityErrors.\n",
    "\n",
    "    Fixed in https://github.com/obspy/obspy/pull/2185\n",
    "    \"\"\"\n",
    "    cat = catalog.copy()\n",
    "    for obj, parent, attr in yield_obj_parent_attr(cat, cls=ev.QuantityError):\n",
    "        if not obj:\n",
    "            setattr(parent, attr, None)\n",
    "    return cat\n",
    "\n",
    "cat1 = _remove_empty_quantity_errors(cat)\n",
    "\n",
    "cat2 = _remove_empty_quantity_errors(cat2)\n",
    "\n",
    "assert cat1 == cat2"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
